# 1. Stage: —Å–±–æ—Ä–∫–∞
FROM node:20-alpine AS builder

WORKDIR /app

# –°–Ω–∞—á–∞–ª–∞ –∫–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ package*.json ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
COPY package*.json ./
RUN npm ci

# –ó–∞—Ç–µ–º ‚Äî –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ (—É–∂–µ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
COPY . .
RUN echo "üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –Ω–∞—á–∏–Ω–∞–µ–º –±–∏–ª–¥..." && npm run build

# 2. Stage: –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
FROM alpine:3.18

WORKDIR /react
COPY --from=builder /app/dist ./dist
